{"remainingRequest":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aloehuihui/Documents/vue-example/vue-test-manu/src/components/PieChart.vue?vue&type=style&index=0&id=63fb763c&scoped=true&lang=css&","dependencies":[{"path":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/src/components/PieChart.vue","mtime":1608716360137},{"path":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aloehuihui/Documents/vue-example/vue-test-manu/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBpZSB7CiAgd2lkdGg6IDMwMHB4OwogIGhlaWdodDogMTAwJTsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbGVmdDogMTAwcHg7CiAgdG9wOiAyMHB4OwogIGZsZXg6IDE7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KLnBpZS1sZWdlbmQgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogNTAlOwogICAgdG9wOiAxNSU7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICB9Ci5waWUtbGVnZW5kIHNwYW4gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwYWRkaW5nOiAzcHggNXB4OwogIGJhY2tncm91bmQ6ICNGRkI0ODc7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQo="},{"version":3,"sources":["PieChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PieChart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"pie\">\n    <h5>饼图1</h5>\n    <div\n      id=\"myChart\"\n      :style=\"`width: 20vw; height: 20vh`\"\n    />\n    <div class=\"pie-legend\">\n      <span>{{dataWithRate[0].name }}: {{ dataWithRate[0].rate }}%</span>\n      <span>{{dataWithRate[1].name }}: {{ dataWithRate[1].rate }}%</span>\n      <span>{{dataWithRate[2].name }}: {{ dataWithRate[2].rate }}%</span>\n    </div>\n  </div>\n</template>\n<script>\n// 直接引用\n// import echarts from '@/lib/echart.js' \nexport default {\n  components: {\n  },\n  props: {\n    pieData: {\n      type: Array,\n      default: () => []\n    },\n    width: {\n      type: Number,\n      default: 18\n    },\n    height: {\n      type: Number,\n      default: 19\n    }\n  },\n  data() {\n    return {\n      charts: ''\n    }\n  },\n  computed: {\n    dataWithRate() {\n      const total = this.getTotal(this.pieData)\n      const withRate = this.pieData.map(it => {\n        return ({\n          ...it,\n          rate: Math.round((it.value * 100 / total) * 100) / 100\n        })\n      })\n      return withRate\n    }\n  },\n  watch: {\n    pieData(n, o) {\n      this.initcharts()\n    }\n  },\n  mounted() {\n    this.initcharts()\n    window.addEventListener('resize', () => {\n      if (this.charts) {\n        this.charts.resize()\n      }\n    })\n  },\n  methods: {\n    getTotal(arr) {\n      const total = arr.reduce((prev, cur) => {\n        return (+prev) + (+cur.value)\n      }, 0)\n      return total\n    },\n    initcharts() {\n      this.$nextTick(() => {\n        this.charts = echarts.init(document.getElementById('myChart'))\n        const groupOptions = {\n          tooltip: {\n            trigger: 'item',\n            formatter: function(parms) {\n              const str =\n              parms.marker +\n              '' +\n              parms.data.name +\n              '</br>' +\n              '数量：' +\n              parms.data.value +\n              '</br>' +\n              '环比：' +\n              parms.percent +\n              '%'\n              return str\n            }\n          },\n          grid: {\n            left: '0%',\n            right: '30%',\n            bottom: 0,\n            containLabel: true\n          },\n          graphic: {\n            elements: [{\n              type: 'image',\n              style: {\n                width: 50,\n                height: 50\n              },\n              left: 'center',\n              top: 'center'\n            }]\n          },\n          color: ['#FFB487', '#FF4A4A', '#6D3BD5'],\n          series: [{\n            type: 'pie',\n            radius: ['58%', '70%'],\n            center: ['50%', '50%'],\n            data: this.pieData,\n            labelLine: {\n              show: false\n            },\n            label: {\n              show: false\n            }\n          }]\n        }\n        this.charts.setOption(groupOptions)\n      })\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n  .pie {\n    width: 300px;\n    height: 100%;\n    position: relative;\n    left: 100px;\n    top: 20px;\n    flex: 1;\n    margin-left: 10px;\n  }\n  .pie-legend {\n      position: absolute;\n      left: 50%;\n      top: 15%;\n      display: flex;\n      flex-direction: column;\n    }\n  .pie-legend span {\n    display: inline-block;\n    padding: 3px 5px;\n    background: #FFB487;\n    margin-bottom: 10px;\n  }\n</style>\n"]}]}